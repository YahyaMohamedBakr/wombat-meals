<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{%- liquid 
  assign layout_style = section.settings.layout_type
  assign max_width = section.settings.custom_width
  
  if layout_style == 'theme_default'
    assign layout_style = settings.global_layout_type
    assign max_width = settings.global_container_width
  endif
-%}

<aside class="wombat-custom-bar layout-{{ layout_style }}" 
       style="--bar-bg: {{ section.settings.bar_bg }}; 
              --border-bottom: {{ section.settings.divider_width }}px; 
              --border-color: {{ section.settings.divider_color }};
              --local-max-width: {{ max_width }}px;">
  
  <div class="bar-flex-container">
    {%- for block in section.blocks -%}
      <div class="bar-column column-{{ block.settings.alignment }}" {{ block.shopify_attributes }}
           style="--text-color: {{ block.settings.text_color }}; --bg-color: {{ block.settings.bg_color }}; --font-size: {{ block.settings.font_size }}px; --border-radius: {{ block.settings.border_radius }}px; --padding: {{ block.settings.padding }}px; --b-width: {{ block.settings.b_width }}px; --b-color: {{ block.settings.b_color }}; --hover-color: {{ block.settings.hover_color }}; --sep-color: {{ block.settings.sep_color }}; --gap-links: {{ block.settings.gap_links }}px;">
        
        {%- case block.type -%}
          {%- when 'text_item' -%}
            <div class="item-wrapper">
              {%- if block.settings.link != blank -%}<a href="{{ block.settings.link }}">{%- endif -%}
                <div class="styled-box">
                  {% if block.settings.icon != blank %}<span class="item-icon">{{ block.settings.icon }}</span>{% endif %}
                  <span class="item-text">{{ block.settings.text }}</span>
                </div>
              {%- if block.settings.link != blank -%}</a>{%- endif -%}
            </div>

          {%- when 'menu_item' -%}
            <nav class="item-nav">
              {%- for i in (1..3) -%}
                {%- capture label_key -%}link_{{ i }}_label{%- endcapture -%}
                {%- capture url_key -%}link_{{ i }}_url{%- endcapture -%}
                {%- capture icon_key -%}link_{{ i }}_icon{%- endcapture -%}
                {%- if block.settings[label_key] != blank -%}
                  {%- unless forloop.first -%}<div class="nav-separator">|</div>{%- endunless -%}
                  <a href="{{ block.settings[url_key] }}" class="nav-link">
                    {% if block.settings[icon_key] != blank %}<span class="nav-icon">{{ block.settings[icon_key] }}</span>{% endif %}
                    {{ block.settings[label_key] }}
                  </a>
                {%- endif -%}
              {%- endfor -%}
            </nav>
        {%- endcase -%}
      </div>
    {%- endfor -%}
  </div>
</aside>

{% stylesheet %}
  .wombat-custom-bar {
    background-color: var(--bar-bg);
    border-bottom: var(--border-bottom) solid var(--border-color);
    padding: 10px 0;
    width: 100%;
  }

  .bar-flex-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 0 auto;
    padding: 0 1.5rem;
    width: 100%;
  }

  .layout-boxed .bar-flex-container {
    max-width: var(--local-max-width);
  }

  .layout-full .bar-flex-container {
    max-width: 100%;
  }

  
  .bar-column { flex: 1; display: flex; font-size: var(--font-size); color: var(--text-color); align-items: center; }
  .column-left { justify-content: flex-start; }
  .column-center { justify-content: center; }
  .column-right { justify-content: flex-end; }
  .styled-box { background-color: var(--bg-color); padding: var(--padding) calc(var(--padding) * 2.5); border-radius: var(--border-radius); border: var(--b-width) solid var(--b-color); display: flex; align-items: center; gap: 8px; font-weight: 700; transition: all 0.3s ease; }
  .nav-link { text-decoration: none; color: inherit; display: flex; align-items: center; gap: 6px; font-weight: 600; transition: color 0.3s ease; }
  .nav-link:hover { color: var(--hover-color); }
  .item-nav { display: flex; align-items: center; gap: var(--gap-links); }

  @media screen and (max-width: 749px) {
    .bar-flex-container { flex-direction: column; gap: 10px; padding: 10px; }
    .bar-column { justify-content: center; width: 100%; }
    .nav-separator { display: none; }
  }


  
{% endstylesheet %}
<style>
 
  #shopify-section-{{ section.id }} .wombat-custom-bar {
    background-color: {{ section.settings.bar_bg }};
    border-bottom: {{ section.settings.divider_width }}px solid {{ section.settings.divider_color }};
    padding: 10px 0;
    width: 100% !important;
    display: block !important;
  }

 
  #shopify-section-{{ section.id }} .bar-flex-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 0 auto !important;
    padding: 0 1.5rem;
    width: 100% !important;
    
    {% if layout_style == 'full' %}
      max-width: 100% !important;
    {% else %}
      
      max-width: {{ max_width }}px !important; 
    {% endif %}
  }

  
  #shopify-section-{{ section.id }} .bar-column {
    flex: 1;
    display: flex;
    align-items: center;
  }
</style>
{% schema %}
{
  "name": "Wombat Pro Bar V2",
  "settings": [
    {
      "type": "header",
      "content": "Layout Settings (Special)"
    },
    {
      "type": "select",
      "id": "layout_type",
      "label": "Section Layout",
      "options": [
        { "value": "theme_default", "label": "Theme Default" },
        { "value": "boxed", "label": "Custom Boxed" },
        { "value": "full", "label": "Full Width" }
      ],
      "default": "theme_default"
    },
    {
      "type": "range",
      "id": "custom_width",
      "label": "Custom Boxed Width",
      "min": 800,
      "max": 1600,
      "step": 10,
      "unit": "px",
      "default": 1200,
      "info": "Only applies if 'Custom Boxed' is selected."
    },
    { "type": "header", "content": "Colors & Borders" },
    { "type": "color", "id": "bar_bg", "label": "Bar Background", "default": "#b06d4d" },
    { "type": "color", "id": "divider_color", "label": "Bottom Border Color", "default": "#ffffff" },
    { "type": "range", "id": "divider_width", "label": "Bottom Border Thickness", "min": 0, "max": 5, "default": 0 }
  ],
  "blocks": [
    {
      "type": "text_item",
      "name": "Styled Box (Center)",
      "settings": [
        { "type": "inline_richtext", "id": "text", "label": "Text", "default": "ORDER BEFORE 8AM" },
        { "type": "text", "id": "icon", "label": "Icon" },
        { "type": "url", "id": "link", "label": "Link" },
        { "type": "header", "content": "Styling" },
        { "type": "color", "id": "text_color", "label": "Text Color", "default": "#b06d4d" },
        { "type": "color", "id": "hover_color", "label": "Hover Color", "default": "#8a4f32" },
        { "type": "color", "id": "bg_color", "label": "Box Background", "default": "#ffffff" },
        { "type": "range", "id": "font_size", "label": "Font Size", "min": 8, "max": 20, "default": 12 },
        { "type": "range", "id": "border_radius", "label": "Corner Radius", "min": 0, "max": 50, "default": 30 },
        { "type": "range", "id": "padding", "label": "Internal Padding", "min": 2, "max": 20, "default": 8 },
        { "type": "range", "id": "b_width", "label": "Box Border Thickness", "min": 0, "max": 5, "default": 0 },
        { "type": "color", "id": "b_color", "label": "Box Border Color", "default": "#000000" },
        { "type": "select", "id": "alignment", "label": "Position", "options": [{"value":"left","label":"Left"},{"value":"center","label":"Center"},{"value":"right","label":"Right"}], "default": "center" }
      ]
    },
    {
      "type": "menu_item",
      "name": "Icon Links (Right)",
      "settings": [
        { "type": "header", "content": "Links" },
        { "type": "text", "id": "link_1_label", "label": "L1 Label", "default": "Delivery" },
        { "type": "url", "id": "link_1_url", "label": "L1 URL" },
        { "type": "html", "id": "link_1_icon", "label": "L1 Icon", "default": "üöö" },
        { "type": "text", "id": "link_2_label", "label": "L2 Label", "default": "FAQ" },
        { "type": "url", "id": "link_2_url", "label": "L2 URL" },
        { "type": "html", "id": "link_2_icon", "label": "L2 Icon", "default": "‚ùì" },
        { "type": "text", "id": "link_3_label", "label": "L3 Label", "default": "How it works" },
        { "type": "url", "id": "link_3_url", "label": "L3 URL" },
        { "type": "html", "id": "link_3_icon", "label": "L3 Icon", "default": "‚ÑπÔ∏è" },
        { "type": "header", "content": "Styling" },
        { "type": "color", "id": "text_color", "label": "Links Color", "default": "#ffffff" },
        { "type": "color", "id": "hover_color", "label": "Hover Color", "default": "#d1d1d1" },
        { "type": "color", "id": "sep_color", "label": "Separator Color", "default": "#ffffff" },
        { "type": "range", "id": "gap_links", "label": "Gap between links", "min": 5, "max": 40, "default": 20 },
        { "type": "range", "id": "font_size", "label": "Font Size", "min": 8, "max": 20, "default": 11 },
        { "type": "select", "id": "alignment", "label": "Position", "options": [{"value":"left","label":"Left"},{"value":"center","label":"Center"},{"value":"right","label":"Right"}], "default": "right" }
      ]
    }
  ],
  "presets": [{ "name": "Wombat Master Bar Pro" }]
}
{% endschema %}
